{
  "name": "demo-app",
  "version": "1.0.0",
  "private": true,
  "description": "Demo application for k8s ephemeral environments",
  "scripts": {
    "build": "pnpm -r build",
    "build:api": "pnpm --filter @demo-app/api build",
    "build:web": "pnpm --filter @demo-app/web build",
    "dev": "pnpm -r --parallel dev",
    "dev:api": "pnpm --filter @demo-app/api dev",
    "dev:web": "pnpm --filter @demo-app/web dev",
    "dev:local": "pnpm run local:setup && set -a && . ./.env && set +a && pnpm dev",
    "local:setup": "docker compose up -d && pnpm run local:env && pnpm run local:wait && pnpm run local:migrate",
    "local:env": "test -f .env || cp .env.example .env",
    "local:wait": "echo 'Waiting for PostgreSQL (30s timeout)...' && timeout=30 && elapsed=0 && until docker compose exec -T postgres pg_isready -U app -d app > /dev/null 2>&1; do sleep 1; elapsed=$((elapsed+1)); if [ $elapsed -ge $timeout ]; then echo 'Timeout waiting for PostgreSQL' && exit 1; fi; done && echo 'PostgreSQL is ready!'",
    "local:migrate": "set -a && . ./.env && set +a && pnpm --filter @demo-app/api db:migrate",
    "teardown": "docker compose down",
    "teardown:clean": "docker compose down -v",
    "local:reset": "pnpm teardown:clean && pnpm run local:setup",
    "start": "pnpm --filter @demo-app/api start:prod",
    "lint": "pnpm -r lint",
    "clean": "pnpm -r clean",
    "test": "pnpm -r test",
    "test:cov": "pnpm -r test:cov"
  },
  "engines": {
    "node": ">=22.0.0",
    "pnpm": ">=9.0.0"
  },
  "packageManager": "pnpm@10.26.2",
  "dependencies": {
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.3"
  },
  "pnpm": {
    "overrides": {
      "qs": ">=6.14.1",
      "esbuild": ">=0.25.0"
    }
  }
}
